# Объединение профиля и главного меню

## Что изменилось

Профиль пользователя и главное меню теперь объединены в одно сообщение для удобства использования.

## Новая структура

### Объединенное меню показывает:
1. **Информацию о профиле:**
   - 🆔 ID пользователя
   - 👋 Имя пользователя  
   - 🌐 Язык
   - 📊 Статус (🆓 Бесплатный / ⭐ Premium)
   - ⏰ Подписка до (если есть активная подписка)

2. **Все кнопки меню:**
   - 💳 Мои подписки / 🔑 Мои ключи (для Premium)
   - 💰 Купить подписку / 👥 Пригласить друзей
   - 📖 Инструкция / 💬 Поддержка

## Когда показывается объединенное меню

### ✅ Объединенное меню показывается:
- При команде `/start` для **существующих пользователей**
- При нажатии кнопки "👤 Профиль" 
- При нажатии кнопки "⬅️ Назад" из других разделов

### 📝 Простое приветствие показывается:
- При команде `/start` для **новых пользователей** (с кнопкой "🎉 Получить пробный доступ")

## Техническая реализация

### Новые функции в UI:
- `GetMainMenuWithProfileText()` - объединенный текст
- `GetMainMenuWithProfileKeyboard()` - объединенная клавиатура

### Обновленные хендлеры:
- `handleOpenMenu()` - теперь показывает объединенное меню
- `handleOpenProfile()` - перенаправляет на объединенное меню
- `StartHandler` - показывает объединенное меню для существующих пользователей

## Преимущества

### ✅ Для пользователей:
- Вся информация в одном месте
- Меньше переходов между меню
- Быстрый доступ к профилю и функциям

### ✅ Для разработки:
- Упрощенная навигация
- Меньше дублирования кода
- Единая точка входа в меню

## Структура кнопок

```
┌─────────────────────────────────────┐
│         💳 Мои подписки             │
├─────────────────────────────────────┤
│ 💰 Купить подписку │ 👥 Пригласить  │
├─────────────────────────────────────┤
│ 📖 Инструкция    │ 💬 Поддержка    │
└─────────────────────────────────────┘
```

## Новая структура подписок

### При нажатии "💳 Мои подписки":
Показывается список всех подписок пользователя с кнопками для каждой подписки.

### При выборе конкретной подписки:
```
📋 Детали подписки

📦 План: Premium 1 месяц
💰 Цена: 300₽
⏰ Длительность: 30 дней
✅ Статус: Активна
📅 Активна до: 15.11.2024 12:00

🔑 Ваши ключи:

1. My VPN Config
   📊 Статус: active
   ⏰ Истекает: 15.11.2024 12:00
   💾 Лимит: 100 GB

┌─────────────────────────────────────┐
│         🔑 My VPN Config            │
├─────────────────────────────────────┤
│    ➕ Создать новую конфигурацию    │
├─────────────────────────────────────┤
│       🔄 Продлить подписку          │
├─────────────────────────────────────┤
│       ⬅️ Назад к подпискам          │
└─────────────────────────────────────┘
```

### Ключи внутри подписок:
- Каждый ключ/конфиг теперь привязан к своей подписке
- При клике на ключ - показываются детали и конфигурация
- Можно создать несколько ключей для одной подписки
- Все ключи одной подписки истекают одновременно

## Обратная совместимость

- Все существующие callback'ы работают как раньше
- Кнопки "Назад" ведут в объединенное меню
- Простая структура сохранена для новых пользователей
