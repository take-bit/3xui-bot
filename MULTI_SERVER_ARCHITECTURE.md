# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ 3X-UI

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Å–µ—Ä–≤–µ—Ä–∞–º–∏ 3X-UI –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ—Ç—É —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–µ—Ä–≤–µ—Ä–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è:

- **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É –Ω–∞–≥—Ä—É–∑–∫–∏** –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π failover** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
- **–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫—É—é –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è** –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
- **–ì–∏–±–∫–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤—ã–±–æ—Ä–∞** —Å–µ—Ä–≤–µ—Ä–∞

## üèõÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   VPN Service   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ  Server Manager  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ  XUI Clients    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚ñº                       ‚ñº                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   User Repo     ‚îÇ    ‚îÇ  Server Selector ‚îÇ    ‚îÇ  Health Monitor ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 1. **Server Manager** (`internal/service/server/server_manager.go`)

–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Å–µ—Ä–≤–µ—Ä–∞–º–∏:

- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏**: —Å–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–∞ –ª—é–±–æ–º —Å–µ—Ä–≤–µ—Ä–µ
- **–í—ã–±–æ—Ä —Å–µ—Ä–≤–µ—Ä–∞**: –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –ª—É—á—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: —Å–±–æ—Ä –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ —Å–µ—Ä–≤–µ—Ä–∞–º

### 2. **Server Selectors** (`internal/service/server/selectors.go`)

–†–µ–∞–ª–∏–∑—É—é—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤—ã–±–æ—Ä–∞ —Å–µ—Ä–≤–µ—Ä–∞:

- **Least Load**: —Å–µ—Ä–≤–µ—Ä —Å –Ω–∞–∏–º–µ–Ω—å—à–µ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π
- **Round Robin**: —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Å–µ—Ä–≤–µ—Ä–æ–≤
- **Random**: —Å–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä
- **Geographic**: –≤—ã–±–æ—Ä –ø–æ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º—É –ø–æ–ª–æ–∂–µ–Ω–∏—é
- **Priority**: –≤—ã–±–æ—Ä –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É —Å–µ—Ä–≤–µ—Ä–∞

### 3. **Configuration** (`internal/domain/config.go`)

–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤:

```json
{
  "xui_servers": [
    {
      "id": 1,
      "name": "EU Server 1",
      "host": "eu1.example.com",
      "port": 2053,
      "username": "admin",
      "password": "",
      "enabled": true,
      "priority": 1,
      "max_clients": 100,
      "region": "EU"
    }
  ],
  "server_management": {
    "selection_strategy": "least_load",
    "health_check_interval": "30s",
    "auto_failover": true,
    "geographic_routing": true
  }
}
```

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ VPN –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```go
// –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤—ã–±–æ—Ä–æ–º —Å–µ—Ä–≤–µ—Ä–∞
connection, err := vpnService.CreateConnection(ctx, userID)

// –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ä–µ–≥–∏–æ–Ω–∞
connection, err := vpnService.CreateConnectionWithRegion(ctx, userID, "EU")
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–æ–≤

```go
// –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
err := vpnService.StartHealthMonitoring(ctx)

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
health, err := vpnService.GetAllServersHealth(ctx)

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤
stats, err := vpnService.GetAllServersStats(ctx)
```

### –í—ã–±–æ—Ä —Å–µ—Ä–≤–µ—Ä–∞

```go
// –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–±–æ—Ä–∞ —Å–µ—Ä–≤–µ—Ä–∞
criteria := domain.ServerSelectionCriteria{
    UserID:      userID,
    Region:      "EU",
    MaxLoad:     0.8,
    ExcludeIDs:  []int64{4}, // –∏—Å–∫–ª—é—á–∏—Ç—å —Å–µ—Ä–≤–µ—Ä 4
}

// –í—ã–±–æ—Ä —Å–µ—Ä–≤–µ—Ä–∞
server, err := serverManager.SelectServer(ctx, criteria)
```

## üìä –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤—ã–±–æ—Ä–∞ —Å–µ—Ä–≤–µ—Ä–∞

### 1. **Least Load** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
–í—ã–±–∏—Ä–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä —Å –Ω–∞–∏–º–µ–Ω—å—à–µ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π:
```json
{
  "selection_strategy": "least_load"
}
```

### 2. **Round Robin**
–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Å–µ—Ä–≤–µ—Ä–æ–≤ –¥–ª—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:
```json
{
  "selection_strategy": "round_robin"
}
```

### 3. **Geographic**
–í—ã–±–æ—Ä —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º—É –ø–æ–ª–æ–∂–µ–Ω–∏—é:
```json
{
  "selection_strategy": "geographic",
  "geographic_routing": true
}
```

### 4. **Priority**
–í—ã–±–æ—Ä –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É —Å–µ—Ä–≤–µ—Ä–∞:
```json
{
  "selection_strategy": "priority"
}
```

## üè• –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### Health Check

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–≤:

```go
type ServerHealth struct {
    ServerID      int64         `json:"server_id"`
    IsHealthy     bool          `json:"is_healthy"`
    LastCheck     time.Time     `json:"last_check"`
    ResponseTime  time.Duration `json:"response_time"`
    ErrorCount    int           `json:"error_count"`
    CurrentLoad   float64       `json:"current_load"`
    ActiveClients int           `json:"active_clients"`
}
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤

```go
type ServerStats struct {
    ServerID         int64         `json:"server_id"`
    TotalClients     int           `json:"total_clients"`
    ActiveClients    int           `json:"active_clients"`
    LoadPercentage   float64       `json:"load_percentage"`
    BytesTransferred int64         `json:"bytes_transferred"`
    ConnectionsCount int64         `json:"connections_count"`
}
```

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π Failover

–ü—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. **–û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç** –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞
2. **–ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç** –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã
3. **–£–≤–µ–¥–æ–º–ª—è–µ—Ç** –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –æ –ø—Ä–æ–±–ª–µ–º–µ
4. **–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç** —Ä–∞–±–æ—Ç—É –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞

## üåç –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ –±–ª–∏–∂–∞–π—à–∏–µ —Å–µ—Ä–≤–µ—Ä—ã:

- **EU** ‚Üí –ï–≤—Ä–æ–ø–µ–π—Å–∫–∏–µ —Å–µ—Ä–≤–µ—Ä—ã
- **US** ‚Üí –ê–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–µ —Å–µ—Ä–≤–µ—Ä—ã  
- **ASIA** ‚Üí –ê–∑–∏–∞—Ç—Å–∫–∏–µ —Å–µ—Ä–≤–µ—Ä—ã

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
BOT_TOKEN=your_bot_token
DATABASE_URL=postgres://user:pass@localhost:5432/db

# –°–µ—Ä–≤–µ—Ä—ã 3X-UI (—Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
XUI_SERVER_1_HOST=eu1.example.com
XUI_SERVER_1_PASSWORD=password1
XUI_SERVER_2_HOST=us1.example.com
XUI_SERVER_2_PASSWORD=password2
```

### JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```json
{
  "xui_servers": [
    {
      "id": 1,
      "name": "EU Server",
      "host": "eu1.example.com",
      "port": 2053,
      "username": "admin",
      "enabled": true,
      "priority": 1,
      "max_clients": 100,
      "region": "EU"
    }
  ],
  "server_management": {
    "selection_strategy": "least_load",
    "health_check_interval": "30s",
    "auto_failover": true,
    "load_balance_threshold": 0.8
  }
}
```

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### 1. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å–µ—Ä–≤–µ—Ä—ã
- –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏

### 2. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π failover
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤
- –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–≤

### 3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –í—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
- –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏

### 4. **–ì–∏–±–∫–æ—Å—Ç—å**
- –†–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤—ã–±–æ—Ä–∞
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

## üîß –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤

```bash
# –ù–∞ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–µ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å 3X-UI
bash <(curl -Ls https://raw.githubusercontent.com/MHSanaei/3x-ui/master/install.sh)
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –°–æ–∑–¥–∞—Ç—å config.json
cp config.example.json config.json

# –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export XUI_SERVER_1_PASSWORD="password1"
export XUI_SERVER_2_PASSWORD="password2"
```

### 3. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
# –ó–∞–ø—É—Å–∫ —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
go run cmd/bot/main.go -config config.json

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤
curl http://localhost:2096/health
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

- **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–æ–≤**: –ø—Ä–æ—Ü–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã
- **–ù–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤**: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞**: –∑–∞–¥–µ—Ä–∂–∫–∞ –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤
- **–û—à–∏–±–∫–∏**: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```json
{
  "level": "info",
  "msg": "Server health check completed",
  "server_id": 1,
  "is_healthy": true,
  "response_time": "150ms",
  "load_percentage": 45.5
}
```

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞

```go
type CustomSelector struct{}

func (s *CustomSelector) SelectServer(ctx context.Context, servers []*domain.Server, criteria domain.ServerSelectionCriteria) (*domain.Server, error) {
    // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Å–µ—Ä–≤–µ—Ä–∞
    return servers[0], nil
}

func (s *CustomSelector) GetStrategy() domain.ServerSelectionStrategy {
    return "custom"
}
```

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```go
// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
type CustomHealthChecker struct{}

func (c *CustomHealthChecker) CheckHealth(ctx context.Context, server *domain.Server) (*domain.ServerHealth, error) {
    // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è
    return &domain.ServerHealth{
        ServerID:  server.ID,
        IsHealthy: true,
        // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
    }, nil
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS** –¥–ª—è –≤—Å–µ—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
2. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø** –∫ –ø–∞–Ω–µ–ª—è–º 3X-UI
3. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ** –ø–∞—Ä–æ–ª–∏ –∏ —Ç–æ–∫–µ–Ω—ã
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ** –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ VPN** –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä–∞–º

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ –∫–æ–¥–µ!
XUI_SERVER_1_PASSWORD=secure_password_here
XUI_SERVER_2_PASSWORD=another_secure_password
DATABASE_URL=postgres://user:password@localhost:5432/db
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [3X-UI Documentation](https://github.com/MHSanaei/3x-ui)
- [PostgreSQL Documentation](https://www.postgresql.org/docs/)
- [Go Context Package](https://pkg.go.dev/context)
- [Clean Architecture Principles](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)
